
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Google Summer Of Code Week 2 Checkin</title>
    
    <meta name="author" content="Nick Confrey">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap styles -->
    <link href="/assets/themes/bootstrap-3/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Optional theme -->
    <link href="/assets/themes/bootstrap-3/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet">
    <!-- Sticky Footer -->
    <link href="/assets/themes/bootstrap-3/bootstrap/css/bs-sticky-footer.css" rel="stylesheet">
    
    <!-- Custom styles -->
    <link href="/assets/themes/bootstrap-3/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!-- Update these with your own images
      <link rel="shortcut icon" href="images/favicon.ico">
      <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
      <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
      <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
    -->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

  </head>

  <body>
    <div id="wrap">
      <nav class="navbar navbar-default" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#jb-navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">Confrey Page</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="jb-navbar-collapse">
          <ul class="nav navbar-nav">
            
            
            


  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/pages.html">Pages</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  



          </ul>
          <form class="navbar-form navbar-right" role="search">
            <div class="form-group">
              <input type="text" class="form-control" placeholder="Search">
            </div>
            <button type="submit" class="btn btn-default">Submit</button>
          </form>
        </div><!-- /.navbar-collapse -->
      </nav>

      <div class="container">
        
<div class="page-header">
  <h1>Google Summer Of Code Week 2 Checkin 
    <br><small>Streaming over UDP</small></h1>
</div>

<div class="row post-full">
  <div class="col-xs-12">
    <div class="date">
      <span>09 July 2015</span>
    </div>
    <div class="content">
      <p>Its been a pretty fun week coding over here. This is the first week I struck out onto my own to write my own network streaming Processing library over UDP. At the end of the week, I was able to create a library that allows Processing users to stream webcam and sketch images over UDP.</p>

<p>The first half of the week was devoted to setting up the development environment and getting the structure of the library in order to really start work on the video streaming library. Of course, as any “simple” thing is in computing, it took way longer than expected as I ran into many problems. First of all, the buildpaths in the sample processing library template are all for OSX, and so it took me forever to figure out that all the slashes / need to be \ on windows (because one \ is an escape character, so to have an actual slash you need two of them). I also ran into problems finding <code>tools.jar</code> as part of the JDK and setting up eclipse with the right versions of Java. Finally the last problem was with git submodules, as I forked the processing library template into my working directory so git wouldn’t track any new changes inside those files. These problems consumed my Monday and Tuesday, but then I was able to move onto the more exciting things.</p>

<p>Starting on Tuesday afternoon, I used a <a href="http://shiffman.net/2010/11/13/streaming-video-with-udp-in-processing/">UDP tutorial</a> to build a simple webcam streaming example program. All the logic of the networking pieces (like setting up datagram ports, compressing the image, creating packets) is all done in my library now, so sending a frame is as simple as calling <code>broadcast(c)</code>, where c is a <code>Capture</code> object (although it could be any <code>PImage</code>). The example sketches I wrote are super super simple now, and I’m proud of how little code a Processing user will have to write to stream webcam feeds. The library code is structured into two files, <code>videoBroadcaster.java</code> and <code>videoReceiver.java</code>, which act as a server/client.</p>

<p>I then built on top of the <code>broadcast()</code> function to be able to share any sketch’s screen. By simply calling <code>screenBroadcast()</code> with no arguments in the draw function, whatever is currently displayed on one sketch’s screen will be streamed to the client sketch. This makes it trivial to share complex designs across different Processing sketches.</p>

<p>Finally, I took another look at what I built last week and modified the <code>serverEvent</code> function so that it won’t conflict/break other example code. Now there is a method <code>serverDisconnectEvent(Server, Client)</code> that is fired whenever a client disconnects. This is important now that I can keep track of individual clients, because then I can find out which exact client left. I think the code is robust enough to potentially be merged into the actual core library.</p>

<p>There are obviously many next steps that can be done. First, these methods are all blocking which is not ideal. Incorporating threads is an obvious next step. I also want to stream audio, because I can’t find a library that will do it. I’m going to take some mentor advice and look into <a href="http://gstreamer.freedesktop.org/">GStreamer</a>.</p>

<p>That sums up the week! Example code for my new Processing functions can be found <a href="https://github.com/nconfrey/GSoC/tree/master/coreExamples">here</a>, the sending and receiving classes are <a href="https://github.com/nconfrey/GSoC/blob/master/videoStreaming/videoStreaming/src/processing/streaming/VideoBroadcaster.java">here</a>. Drop a comment if the UDP streaming either worked really well for you or broke–either way, it’s useful information!</p>

    </div>

  
    <ul class="tag_box inline">
      <li><i class="glyphicon glyphicon-open"></i></li>
      
      


  
     
    	<li><a href="/categories.html#gsoc-ref">
    		gsoc <span>8</span>
    	</a></li>
    
  


    </ul>
    

  
    <ul class="tag_box inline">
      <li><i class="glyphicon glyphicon-tags"></i></li>
      
      


  
     
    	<li><a href="/tags.html#GSoC-ref">GSoC <span>8</span></a></li>
     
    	<li><a href="/tags.html#Processing-ref">Processing <span>8</span></a></li>
     
    	<li><a href="/tags.html#networking-ref">networking <span>8</span></a></li>
     
    	<li><a href="/tags.html#project-ref">project <span>8</span></a></li>
    
  



    </ul>
    
  
    <hr>
    <ul class="pagination">
    
      <li class="prev"><a href="/lessons/2011/12/29/jekyll-introduction" title="Jekyll Introduction">&laquo; Previous</a></li>
    
      <li><a href="/archive.html">Archive</a></li>
    
      <li class="next"><a href="/gsoc/2015/07/16/Google-Summer-of-Code-Week-3-Checkin" title="Google Summer Of Code Week 3 Checkin">Next &raquo;</a></li>
    
    </ul>
    <hr>
    


  <div id="disqus_thread"></div>
<script type="text/javascript">
    
    var disqus_developer = 1;
    var disqus_shortname = 'jekyllbootstrap'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




  </div>
</div>


      </div>

    </div>

    <div id="footer">
      <div class="container">
        <p>&copy; 2015 Nick Confrey
          with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
          and <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>
        </p>
      </div>
    </div>

    





    <!-- Latest compiled and minified JavaScript, requires jQuery 1.x (2.x not supported in IE8) -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="/assets/themes/bootstrap-3/bootstrap/js/bootstrap.min.js"></script>
  </body>
</html>

