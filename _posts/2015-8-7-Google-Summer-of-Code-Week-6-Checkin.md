---
layout: post
category : GSoC
tagline: "Windows Sucks part 2"
tags : [GSoC, Processing, networking, project]
---

Into week 7 now and last week I learned a very valuable lesson: Don’t develop on a Windows computer. With that in mind, I’ve dual-booted my machine into Ubuntu and will continue my development there. The story of last week were increasingly frustrating Windows-based errors.

The problem I began with last week was an inability to use the UDPsink and src elements in the pipeline in the code I had written in C. It turns out that the source of that error was an outdated Windows network driver, which required a system update to fix. The system update took most of Monday to install and download, which meant I lost a day of productivity. At least that night, I ran my C code and it preformed as expected.

However, when I woke up the next morning, the same code that ran fine the night before wasn’t working anymore. It would compile in GCC, but then immediately hang and crash without any output (even after doing print statement debugging). I was pretty mystified, and ran it under gdb and got “During startup program exited with code 0xc0000139.” This error code didn’t have much information out on the web, but I surmised it was because of being unable to find certain system files (dll’s) needed to compile. This was especially odd, since it compile fine the night before. I spent Tuesday and Wednesday trying to figure out what could have possibly changed. I did system restores, reinstallations of pretty much everything, and a complete revert of everything in git without luck. Wednesday night I figured out that it was an update from Visual Studio that modified the system path in such a way that the compiler was loading a different version of the C++ runtime executables. By changing the order of my path environment variable, I was finally able to get the code to compile as expected, after three days of fighting.

This officially concluded step 1 of my project, and the next step is to work with JNI or JNA. In order to learn JNI, I was following the most basic hello world example tutorial online. Everything was going well until it was time to compile. JNI creates a new library that the Java code can link into and then use the native C functions. The problem was that I was using GCC in Cygwin, which is the Windows version of a Unix-like command line. Unbeknownst to me, whenever GCC compiled, it was dependent on the Cygwin dll’s. The first problem was that this obviously wasn’t ever going to be cross platform, but the second problem was that the library wouldn’t work at all outside of Cygwin. If you are curious, you can read more about my problem here as I described it on (stack overflow)[http://stackoverflow.com/questions/31751528/how-to-compile-with-mno-cygwin-or-without-including-cygwin-dlls-with-gcc-4] but the gist of it was that there used to be a simple solution by compiling under the –mno-cygwin flag, but it was depreciated in the newest version of Cygwin, leaving me without options.

At this point, I was pretty fed up with fighting Windows and so I’ve decided to abandon ship and develop on Linux. Windows didn’t let me go easily and the conversion process took all of Friday and most of the weekend (problems with the Windows backup utility). However, I’m confident that things will be able to move a lot more smoothly now. Gstreamer was developed on Linux, so I think things will be a lot more compatible. Goals for this week are to finish the JNI/JNA conversion stuff and move into step 3, integration with processing. I will have to take some time and set up all my development tools again on the Linux partition, but I hope that can be accomplished in the rest of this afternoon.