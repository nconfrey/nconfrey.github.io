---
layout: post
category : GSoC
tagline: "Week 4 Google Summer of Code Summary"
tags : [GSoC, Processing, networking, project]
---

Just finished up week 4, onto week 5. I’ve actually hit quite the wall and inflexion point in this past week, and I need some guidance on the best way to proceed.

I’ve been in back and forth contact with Andres Colubri about GStreamer, and he’s be extremely helpful in pushing me in the right direction with regards to GStreamer. I spent the first half of week 4 still attempting to get GStreamer to work the way I wanted it to. The idea was that GStreamer would handle the audio and video encoding and compression and leave me with the task of figuring out network programming. GStreamer works in a pipeline fashion, with “elements” being placed one after another in a line to transfer video data. I needed the udpsink element to work, which promised to take the bytes in the pipeline and send them out into the network. On the client side, they would have a udpsrc which would take bytes from the network and put them into the pipeline. But after several days still working at this problem, the udpsink element just would not put bytes into the network (verified by working with Wireshark, a utility to sniff network packets).

Taking a step back, I installed straight GStreamer on the command line which uses the official version, rather than the java bindings version that we are forced to use for Processing (because GStreamer is written in C, so there need to be Java bindings to interact with Processing code). To my surprise, I finally did get the udpsink / udpsrc to work and send video and audio data across the network. The problem was that the Java bindings used in Processing are locked into version .10 of GStreamer, which is end-of-life and not maintained. The version I was able to work was version 1.5, which cannot be used in Java or Processing.

So now I have a problem ahead of me. In order to use modern GStreamer with Processing (and in order to make my udp connections work), we need to rewrite the Java bindings to support version 1.x of GStreamer. Fortunately, in Google Summer of Code 2014, there was a student who took on this problem and nearly solved it by writing a parser to automatically generate Java files from the GStreamer source code. Unfortunately, he left it uncompleted and disappeared off the face of the planet. In order to make his solution work, I need to re-trace his steps, figure out how his parser works, and figure out what still needs to be done. Andres was the student’s mentor for this project and he says there is still “significant work to be done” in order to get the parser to produce java files that will work reliably. Andres wants refactoring GStreamer to Java to be the next phase of my project, because it will help support the Processing video library as well as my networking library.

However, this would be a significant change to my project. I would not be doing networking programming anymore, but rather low level systems programing as I attempted to change C files and plugins to Java compatible ones. At the end of the day, I want to make a networking library as my contribution to Processing. With this in mind, I spent Thursday and Friday working to tighten up and extend the work I did at the very beginning of GSoC, which was manually creating datagram packets to send video frames based on your UDP tutorial. I used this method to transmit audio, and it sounded like driving down the highway with the windows open and a faint bit of a song on the radio. This reminds me of the difficulty of compressing and sending audio, all things that GStreamer would do for me, and I would have to reinvent the wheel a bit to get it into my library.

I can either choose to fix the GStreamer bindings with the hope that it will eventually benefit my networking library, or forgo work on GStreamer and do the networking manually, knowing that it won’t be as robust or well implemented as GStreamer. I’m looking for advice on which path to choose, because in the time I have I can’t do both. Working on the GStreamer risks not actually having a network library at the end of the summer, and working on the networking library risks not having a really good implementation without a builtin video library.